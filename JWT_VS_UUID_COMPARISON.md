# JWT (JSON Web Token) vs UUID (Stateful Session) 비교 설명

이 문서는 인증 시스템에서 사용하는 두 가지 주요 방식인 **JWT(Stateless)** 방식과 **UUID(Stateful)** 방식의 차이점, 장단점, 그리고 현재 프로젝트(V-PASS)에서의 적합성을 설명합니다.

## 1. 기본 개념 비교

| 구분 | UUID (Stateful Session) | JWT (Stateless Token) |
| :--- | :--- | :--- |
| **정의** | 서버가 생성한 임의의 고유 문자열(Random String). 의미 없는 식별자입니다. | 사용자 정보를 암호화(서명)하여 담은 긴 문자열. 토큰 자체에 정보가 들어있습니다. |
| **저장 위치 (서버)** | **DB 또는 메모리(Redis)**에 반드시 저장해야 함. | 서버에 저장하지 않음 (단, 블랙리스트 관리가 필요할 땐 저장). |
| **검증 방식** | 클라이언트가 준 UUID를 **DB에서 조회**하여 유효성을 확인. | 클라이언트가 준 JWT의 **서명(Signature)**을 비밀키로 풀어 조작 여부 확인. |
| **현재 V-PASS 적용** | **O (현재 사용 중)** | X (사용 안 함) |

---

## 2. 상세 장단점 분석

### A. UUID 방식 (Server-Side Session) -> *현재 방식*
서버가 모든 상태를 기억하고 관리하는 방식입니다.

*   **장점 (Pros)**
    1.  **제어권이 서버에 있음**: 관리자가 특정 사용자를 즉시 강제 로그아웃시키거나 인증을 무효화할 수 있습니다. (DB에서 지우면 끝)
    2.  **보안**: 토큰 자체에는 아무런 정보가 없으므로, 탈취당해도 개인정보가 노출되지 않습니다.
    3.  **구현 단순성**: "DB에 있나? 상태가 무엇인가?"만 확인하면 되므로 로직이 직관적입니다.

*   **단점 (Cons)**
    1.  **서버 부하**: 모든 요청마다 DB(또는 Redis)를 조회해야 하므로 사용자가 많아지면 DB 부하가 커집니다.
    2.  **확장성**: 서버를 여러 대(Scale-out)로 늘릴 때, 세션 저장소를 공유(예: Redis Cluster)해야 하는 추가 설정이 필요합니다.

### B. JWT 방식 (Client-Side Token)
정보를 토큰에 담아 클라이언트에게 주고, 서버는 "이건 내가 발급한 게 맞다"라고 서명만 확인하는 방식입니다.

*   **장점 (Pros)**
    1.  **서버 부하 감소**: DB를 조회하지 않고 코드상에서 알고리즘으로만 검증하므로 매우 빠릅니다.
    2.  **확장성(Scale-out) 우수**: 어떤 서버가 요청을 받든 비밀키만 알면 검증할 수 있어 별도의 공유 저장소가 필요 없습니다.

*   **단점 (Cons)**
    1.  **제어 불가능**: 이미 발급된 토큰은 만료 시간(Expire Time)이 될 때까지 **서버가 강제로 죽일 수 없습니다.** (탈취 시 위험)
    2.  **토큰 크기**: 정보(Payload)가 많아질수록 토큰 길이가 길어져 네트워크 트래픽이 증가합니다.
    3.  **보안**: 토큰 내부에 정보(Base64 인코딩)가 들어있어, 누구나 내용을 볼 수 있습니다. (민감 정보 포함 금지)

---

## 3. V-PASS 프로젝트에서의 적합성 판단

현재 V-PASS(수탁사 시스템)는 **UUID 방식이 더 적합**할 수 있습니다.

**이유:**
1.  **상태 관리 필수**: 본인인증은 `인증 요청(PENDING)` -> `인증 번호 확인` -> `통신사 조회` -> `인증 완료(COMPLETED)`라는 **단계별 상태 변화**가 중요합니다. JWT는 한 번 발급되면 내용을 바꾸기 어렵지만, DB 기반 UUID는 상태 필드만 업데이트하면 됩니다.
2.  **일회성 및 보안**: 본인인증은 짧은 시간(3분) 안에 끝나며, 보안이 중요합니다. 문제가 생기면 즉시 해당 세션을 DB에서 삭제하여 무효화할 수 있어야 합니다.

> **결론**: 서비스의 성격(대규모 트래픽 처리 vs 엄격한 상태 관리)에 따라 선택하며, 현재와 같은 **인증 전용 서비스**는 상태 관리가 용이한 **UUID 방식**이 합리적인 선택입니다.
